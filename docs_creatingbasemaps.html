<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>omk basemaps</title>
  <meta name="description" content="OpenMapKitWebsite is the website for the OpenMapKit project. We are moving all training material within the wiki to the website
">

    <link rel="apple-touch-icon" sizes="57x57" href="../images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png">
<link rel="manifest" href="../images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="..images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="/css/foundation.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/fontello.css">
    <link rel="stylesheet" href="/css/fonts.css">
    <link rel="stylesheet" href="/css/custom.css">

    <!--<link rel="stylesheet" href="/css/theDocs.css">-->
    <!--<link rel="stylesheet" href="/css/theDocs.all.min.css">-->

    <!--<link rel="stylesheet" href="/css/font-awesome.css">-->
  <script src="/javascripts/libs.js" type="text/javascript"></script>
  <script>
    // terrificjs bootstrap
    (function($) {
        $(document).ready(function() {
            var $page = $('body');
            var config = {
              dependencyPath: {
                plugin: 'javascripts/'
              }
            }
            var application = new Tc.Application($page, config);
            application.registerModules();
            application.start();
        });
    })(Tc.$);
  </script>

    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
  <link href="http://fonts.googleapis.com/css?family=Raleway:400,700,300" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/masonry.pkgd.js" type="text/javascript"></script>
  <script src="/javascripts/imagesloaded.pkgd.min.js" type="text/javascript"></script>
  <script src="/javascripts/slick.min.js" type="text/javascript"></script>
  <script src="/javascripts/json2.js" type="text/javascript"></script>
  <link rel="canonical" href="http://54.201.29.191//docs_creatingbasemaps.html">
  <link rel="alternate" type="application/rss+xml" title="OpenMapKit Website" href="http://54.201.29.191//feed.xml" />

</head>

<head>

    <!-- Styles -->
    <link rel="stylesheet" href="/css/theDocs.all.min.css">
    <link rel="stylesheet" href="/css/custom.css">

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet' type='text/css'>

</head>


<body class="shrink">

<div class='contain-to-grid sticky fixed'>
    <nav class='top-bar docs-nav-width' data-options='sticky_on: large' data-topbar=''>

        <ul class='title-area'>
            <li class='name'>
                <h1>
                    <a class ="OMK-logo" href='/index.html'>
                        <div class="icn-logo_OMK"></div>
                    </a>
                </h1>
            </li>

            <li class="custom-topbar">
                <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            </li>

        </ul>
        <section class='top-bar-section'>
            <ul class="right">
                
                

                
                <li class="">
                    <a href="/index.html">Home</a>
                </li>
                
                
                

                
                <li class="">
                    <a href="/docs.html">Documentation</a>
                </li>
                
                
            </ul>
        </section>
    </nav>
</div>


<div role='main'>
    <div class="row">

    <!-- Sidebar -->
<aside id="new-sidebar">

    <div class="new-sidebar-content">
        <ul class="">
        

        
        <li><a class="active" href="/index.html">Overview</a></li>
        

        

        
        <li>
            <a href="#">Users</a>
            
            <ul class="open">
                
                <li><a href="/docs_install.html"> Installation</a></li>
                
                <li><a href="/docs_createomksurvey.html"> Setup</a></li>
                
                <li><a href="/docs_odkformsforomk.html"> Creating Surveys for OMK</a></li>
                
                <li><a href="/docs_creatingbasemaps.html"> Creating OSM Basemap</a></li>
                
                <li><a href="/docs_createomksurvey.html"> Additional Resources</a></li>
                
            </ul>
            
        </li>
        

        

        
        <li>
            <a href="#">For Developers</a>
            
            <ul class="open">
                
                <li><a href="/docs_developers.html"> Architecture</a></li>
                
                <li><a href="/docs_developers.html"> Technical Specs</a></li>
                
                <li><a href="/docs_developers.html"> Contributing Code</a></li>
                
            </ul>
            
        </li>
        

        

        
        <li>
            <a href="#">Tutorials</a>
            
            <ul class="open">
                
                <li><a href="/docs_walkthrough.html"> Walkthrough</a></li>
                
                <li><a href="/docs_sampledata.html"> Sample Data</a></li>
                
            </ul>
            
        </li>
        

        

    </ul>
    </div>
</aside>
<!-- END Sidebar -->

    <article class="col-md-12 col-sm-12 main-content new-sidebar-main-padding" role="main">

        <section>
            <p>MBTiles is a format made by the folks at Mapbox that allows you to store PNG or vector tile sets in a single file. An MBTiles file is actually a SQLite database that follows a specific schema. Check out the <a href="https://github.com/mapbox/mbtiles-spec">spec</a> to learn more about it.</p>

<p>You can make your own custom map and export an MBTiles file in <a href="https://www.mapbox.com/tilemill/">Tile Mill</a>. Unfortunately, Mapbox removed this functionality from <a href="https://www.mapbox.com/mapbox-studio/">Mapbox Studio</a>.</p>

<p>For the purpose of OpenMapKit, you can easily scrape PNG tiles from an online endpoint and store them in an MBTiles file with a few NodeJS command-line tools.</p>

<h2 id="scraping-an-online-http-tile-endpoint">Scraping an Online HTTP Tile Endpoint</h2>

<p>A node module called <a href="https://www.npmjs.com/package/tl">tl</a> allows you to scrape an HTTP map tile endpoint for PNG tiles and stuffs them into an MBTiles file. You can install it with the following command:</p>

<p><code>sh
npm install -g tl mbtiles tilelive-http
</code></p>

<p>Now you will have <code>tl</code> installed as a globally accessible executable in your shell environment. Switch to whatever directory you want to save your MBTiles file to. The following command will scrape tiles from the Humanitarian OSM Basemap endpoint for Dhaka, Bangladesh.</p>

<p><code>sh
tl copy -z 13 -Z 19 -b '90.375853 23.700965 90.437307 23.754632' 'http://c.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png' mbtiles://./dhaka.mbtiles
</code></p>

<ul>
  <li><code>-z</code> is the minimum zoom</li>
  <li><code>-Z</code> is the maximum zoom</li>
  <li><code>'90.375853 23.700965 90.437307 23.754632'</code> is the bounding box
    <ul>
      <li><code>southWestLng southWestLat northEastLng northEastLat</code></li>
      <li>Check out <a href="http://bboxfinder.com/">BBoxFinder.com</a> to help you get this bounding box coordinate set.</li>
    </ul>
  </li>
  <li><code>'http://c.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png'</code> is the http endpoint for the tiles</li>
  <li><code>mbtiles://./dhaka.mbtiles</code> is the MBTiles file the scraped PNGs will be saved to</li>
</ul>

<h2 id="pregenerated-offline-mbtiles-basemaps">Pregenerated Offline MBTiles Basemaps</h2>

<p>Below is a list of links to previously generated MBTiles files to get you started. All you need to do to use them is to drag and drop them into the <code>openmapkit/mbitles</code> directory on your Android phone.</p>

<h3 id="humanitarian-openstreetmap">Humanitarian OpenStreetMap</h3>

<ul>
  <li><a href="https://www.dropbox.com/s/bcyg1qkdl502evn/dvziarasekwa-hot-all20.mbtiles">Dvizarasekwa, Harare, Zimbabwe - Mar 24 2015</a>
    <ul>
      <li>Zoom 12 - 22 (Actually only fetched through 20)</li>
      <li>Bounding Box: 30.885143 -17.824980 30.967541 -17.784733</li>
      <li>Command: <code>tl copy -z 13 -Z 22 -b '30.885143 -17.824980 30.967541 -17.784733' 'http://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png' mbtiles://./dvizarasekwa-hot.mbtiles</code></li>
    </ul>
  </li>
  <li><a href="https://www.dropbox.com/s/0vgkkgtcnwpjzs1/dhaka2015-01-02.mbtiles">Dhaka, Bangladesh - Jan 2 2015</a>
    <ul>
      <li>Zoom 13 - 19</li>
      <li>Bounding Box: 90.375853 23.700965 90.437307 23.754632</li>
    </ul>
  </li>
</ul>

<h3 id="standard-openstreetmap">Standard OpenStreetMap</h3>

<ul>
  <li>[Dvizarasekwa, Harare, Zimbabwe - Mar 6 2015]
    <ul>
      <li>Zoom 13 - 20</li>
      <li>Bounding Box: -17.820934970719602 30.90642929077148 -17.788573952710493 30.944967269897</li>
      <li>Command: <code>tl copy -z 13 -Z 20 -b '30.885143 -17.824980 30.967541 -17.784733' 'http://a.tile.openstreetmap.org/{z}/{x}/{y}.png' mbtiles://./dvizarasekwa-osm.mbtiles</code></li>
    </ul>
  </li>
  <li>[Harare, Zimbabwe - Mar 6 2013]
    <ul>
      <li>Zoom 13 - 20</li>
      <li>Bounding Box:</li>
      <li>Command: <code>tl copy -z 13 -Z 20 -b '30.390930 -18.195434 31.709290 -17.551736' 'http://a.tile.openstreetmap.org/{z}/{x}/{y}.png' mbtiles://./harare-osm.mbtiles</code></li>
    </ul>
  </li>
</ul>

<h3 id="preview-mbtiles-locally">Preview MBTiles Locally</h3>

<p>You can use <a href="https://github.com/mojodna/tessera">tessera</a> to locally serve your MBTiles file to allow you to preview the basemap you have scraped.</p>

<p>To install:</p>

<p><code>sh
npm install -g tessera
npm install -g mbtiles
</code></p>

<p>Then, <code>cd</code> to the directory with your MBTiles file. To serve, execute:</p>

<p><code>sh
tessera mbtiles://./whatever.mbtiles
</code></p>

        </section>

    </article>

</div>

</div>

<div id='footer'>
  <div class='row'>
    <div class='small-12 medium-12 large-12  columns'>
      <h1 class="pull-right text-right">
        <a href='http://www.redcross.org' target="_blank" >
          <img src="/images/logo_RC.png" class="footer-logo"/>
        </a>
      </h1>
    </div>
  </div>
</div>

<script src="/javascripts/jquery.countTo.js" type="text/javascript"></script>
<script src="/javascripts/jquery.appear.js" type="text/javascript"></script>
<script src="/javascripts/jquery.validate.js" type="text/javascript"></script>
<script src="/javascripts/jquery.sequence-min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="/javascripts/app.js" type="text/javascript"></script>
<script src="/javascripts/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/matchHeight.min.js" type="text/javascript"></script>
<script src="/javascripts/clipboard.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.fitvids.js" type="text/javascript"></script>
<script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/theDocs.js" type="text/javascript"></script>


</body>

</html>
